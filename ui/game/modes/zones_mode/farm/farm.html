<script type="text/x-handlebars" data-template-name="stonehearthFarm">
   <div id="farmWindow" class="gui">
      <div class="window">
         <div class="title">
            {{ view.unit_name }}<div class="closeButton"></div>
         </div>

         <h2>{{i18n stonehearth:ui.game.zones_mode.farm.choose_crop}}:</h2>

         <div id="cropRotation">
            <table id="cropPanel"><tr><td>
               <a id="addCropLink" {{action "addCropButtonClicked" target="view"}}>
                  <div class="targetCrop downSection">
                     <img class="cropImage tooltip" {{bind-attr src="view.model.stonehearth:farmer_field.current_crop_details.icon" title="view.model.stonehearth:farmer_field.current_crop_details.name"}} />
                  </div>
               </a>
            </td><td>
               <div class="description">
                  <div class="name">{{i18n_key view.current_crop_details.name}}</div>
                  {{i18n_key view.current_crop_details.description}}
               </div>
            </td></tr></table>

            <div id="cropDetails" class="description">
               {{#if view.current_crop_details.preferred_seasons}}
                  <p class="preferredSeasons">
                     <span class="label">{{i18n stonehearth:ui.game.zones_mode.farm.preferred_seasons}}</span>
                     {{view.current_crop_details.preferred_seasons}}
                  </p>
               {{/if}}
               {{#if view.water_affinity}}
               <p class="waterAffinity">
                  {{{ formatted_i18n_key view.water_affinity.description i18n_data=view.water_affinity.i18n_data}}}
               </p>
               <p class="waterAffinity">
                  {{{ formatted_i18n_key view.water_affinity.current_level_description i18n_data=view.water_affinity.current_water_level}}}
               </p>
               {{/if}}
               {{#if view.flood_preference}}
                  <p class="waterAffinity">
                     {{i18n_key view.flood_preference}}
                  </p>
               {{/if}}
            </div>
         </div>

         <p></p>

         <button class="warn">{{i18n stonehearth:ui.game.common.remove}}</button>
         <button class="ok"></button>

      </div>
   </div>
</script>

<script type="text/x-handlebars" data-template-name="stonehearthCropPalette">
   <div id="cropPalette" class="gui">
      <div class="window">
         <div class="title">{{i18n stonehearth:ui.game.zones_mode.farm.choose_crop}}</div>

         <div class="list downSection">
            <table>
               <tbody>
               {{#each view.crops}}
                  <tr {{bind-attr crop=crop_type locked=is_locked class="row this.is_locked:disabled this.is_locked:is-locked this.is_hidden:is-hidden"}}>
                     <td>
                        <div class="icon">
                           <img class="image" {{bind-attr src=crop_info.icon}} />
                        </div>
                     </td>
                     <td>
                        <div class="info">
                           <div class="name">{{i18n_key crop_info.name}}</div>
                           {{#if this.is_locked}}
                              <div class="description">
                                 {{i18n stonehearth:ui.game.show_workshop.level_requirement_needed}}
                                 {{i18n stonehearth:jobs.farmer.farmer_description.display_name}}
                                 {{i18n stonehearth:ui.game.show_workshop.level_requirement_level}}
                                 {{this.crop_level_requirement}}
                              </div>
                           {{else}}
                              <div class="description">
                                 {{i18n_key crop_info.description}}
                                 {{#if crop_info.preferred_seasons}}
                                    <p class="preferredSeasons">
                                       <span class="label">{{i18n stonehearth:ui.game.zones_mode.farm.preferred_seasons}}</span>
                                       {{crop_info.preferred_seasons}}
                                    </p>
                                 {{/if}}
                              </div>
                           {{/if}}
                        </div>
                     </td>
                  </tr>
               {{/each}}
               </tbody>
            </table>
         </div>
      </div>
   </div>
</script>
